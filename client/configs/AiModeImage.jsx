const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");
const fs = require("node:fs");
const mime = require("mime-types");

const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp-image-generation",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseModalities: [
    "image",
    "text",
  ],
  responseMimeType: "text/plain",
};

  export const generateStoryWithImages = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate a story ,example added below, in a 3d cartoon animation style, use text in hindi for 50-60sec. For each scene, generate an image., min(8-9 images) give me output in this schema :\n[\n{\ntext: \"\",\nimage: \"\"\n}\n],,,,add the image urls also, use story like this one or kids book story which they read in their classrooms and create visual story , ‡§è‡§ï ‡§ò‡§®‡§æ ‡§ú‡§Ç‡§ó‡§≤ ‡§•‡§æ, ‡§ú‡§π‡§æ‡§Å ‡§è‡§ï ‡§≤‡§æ‡§≤‡§ö‡•Ä ‡§∂‡•á‡§∞ ‡§∞‡§π‡§§‡§æ ‡§•‡§æ‡•§ ‡§µ‡§π ‡§∞‡•ã‡§ú‡§º ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ï‡•ã ‡§™‡§ï‡§°‡§º‡§ï‡§∞ ‡§ñ‡§æ ‡§ú‡§æ‡§§‡§æ‡•§ ‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§°‡§∞ ‡§ó‡§è ‡§î‡§∞ ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§è‡§ï ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§à‡•§\n\n‡§è‡§ï ‡§¶‡§ø‡§®, ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§ï‡•Ä ‡§¨‡§æ‡§∞‡•Ä ‡§Ü‡§à‡•§ ‡§µ‡§π ‡§ö‡§§‡•Å‡§∞ ‡§•‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§ö‡§≤‡§§‡•á ‡§π‡•Å‡§è ‡§∂‡•á‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§™‡§π‡•Å‡§Å‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∞ ‡§ï‡§∞ ‡§¶‡•Ä‡•§ ‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§π‡§æ‡§°‡§º‡§æ, \"‡§§‡•Ç ‡§¶‡•á‡§∞ ‡§∏‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Ü‡§Ø‡§æ?\"\n\n‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§®‡•á ‡§°‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡§π‡§æ, \"‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú! ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§Ü ‡§∞‡§π‡§æ ‡§•‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§î‡§∞ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§Æ‡•Å‡§ù‡•á ‡§∞‡•ã‡§ï ‡§≤‡§ø‡§Ø‡§æ‡•§ ‡§µ‡§π ‡§ï‡§π ‡§∞‡§π‡§æ ‡§•‡§æ ‡§ï‡§ø ‡§Ø‡§π ‡§ú‡§Ç‡§ó‡§≤ ‡§Ö‡§¨ ‡§â‡§∏‡§ï‡§æ ‡§π‡•à!\"\n\n‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§ó‡§¨‡§¨‡•Ç‡§≤‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ, \"‡§ï‡•å‡§® ‡§π‡•à ‡§µ‡•ã? ‡§Æ‡•Å‡§ù‡•á ‡§¶‡§ø‡§ñ‡§æ‡§ì!\"\n\n‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§∂‡•á‡§∞ ‡§ï‡•ã ‡§ú‡§Ç‡§ó‡§≤ ‡§ï‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§ï‡•Å‡§è‡§Å ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§≤‡•á ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§ï‡§π‡§æ, \"‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú, ‡§µ‡•ã ‡§á‡§∏‡•Ä ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡§æ ‡§π‡•à!\"\n\n‡§∂‡•á‡§∞ ‡§®‡•á ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ù‡§æ‡§Å‡§ï‡§æ, ‡§§‡•ã ‡§â‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§π‡•Ä ‡§™‡§∞‡§õ‡§æ‡§à ‡§¶‡§ø‡§ñ‡•Ä‡•§ ‡§â‡§∏‡§®‡•á ‡§∏‡•ã‡§ö‡§æ ‡§ï‡§ø ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§∂‡•á‡§∞ ‡§â‡§∏‡•á ‡§ò‡•Ç‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à! ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§®‡•á ‡§ú‡•ã‡§∞ ‡§∏‡•á ‡§¶‡§π‡§æ‡§°‡§º‡§æ ‡§î‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§õ‡§≤‡§æ‡§Ç‡§ó ‡§≤‡§ó‡§æ ‡§¶‡•Ä‡•§ üåÄüí¶\n\n‡§¨‡§∏! ‡§∂‡•á‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§ï‡§∞ ‡§°‡•Ç‡§¨ ‡§ó‡§Ø‡§æ‡•§ ‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ñ‡•Å‡§∂‡•Ä ‡§∏‡•á ‡§®‡§æ‡§ö‡§®‡•á ‡§≤‡§ó‡•á, ‡§î‡§∞ ‡§ö‡§§‡•Å‡§∞ ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§π‡•Ä‡§∞‡•ã ‡§¨‡§® ‡§ó‡§Ø‡§æ! üéâüê∞"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's the story in Hindi with image descriptions and example image URLs, designed for a 3D cartoon animation style (approximately 50-60 seconds if each scene is around 5-7 seconds long).\n\n**Please note:** I cannot directly generate images. I will provide descriptions for the images you need to create or imagine, along with placeholder image URLs. You will need to use an image generation tool to create the actual images based on these descriptions and replace the placeholder URLs.\n\nHere's the output in the requested schema:\n\n**Story:**\n\n‡§è‡§ï ‡§ò‡§®‡§æ ‡§ú‡§Ç‡§ó‡§≤ ‡§•‡§æ, ‡§ú‡§π‡§æ‡§Å ‡§è‡§ï ‡§≤‡§æ‡§≤‡§ö‡•Ä ‡§∂‡•á‡§∞ ‡§∞‡§π‡§§‡§æ ‡§•‡§æ‡•§ ‡§µ‡§π ‡§∞‡•ã‡§ú‡§º ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ï‡•ã ‡§™‡§ï‡§°‡§º‡§ï‡§∞ ‡§ñ‡§æ ‡§ú‡§æ‡§§‡§æ‡•§ ‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§°‡§∞ ‡§ó‡§è ‡§î‡§∞ ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§è‡§ï ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§à‡•§\n\n‡§è‡§ï ‡§¶‡§ø‡§®, ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§ï‡•Ä ‡§¨‡§æ‡§∞‡•Ä ‡§Ü‡§à‡•§ ‡§µ‡§π ‡§ö‡§§‡•Å‡§∞ ‡§•‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§ö‡§≤‡§§‡•á ‡§π‡•Å‡§è ‡§∂‡•á‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§™‡§π‡•Å‡§Å‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∞ ‡§ï‡§∞ ‡§¶‡•Ä‡•§ ‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§π‡§æ‡§°‡§º‡§æ, \"‡§§‡•Ç ‡§¶‡•á‡§∞ ‡§∏‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Ü‡§Ø‡§æ?\"\n\n‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§®‡•á ‡§°‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡§π‡§æ, \"‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú! ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§Ü ‡§∞‡§π‡§æ ‡§•‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§î‡§∞ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§Æ‡•Å‡§ù‡•á ‡§∞‡•ã‡§ï ‡§≤‡§ø‡§Ø‡§æ‡•§ ‡§µ‡§π ‡§ï‡§π ‡§∞‡§π‡§æ ‡§•‡§æ ‡§ï‡§ø ‡§Ø‡§π ‡§ú‡§Ç‡§ó‡§≤ ‡§Ö‡§¨ ‡§â‡§∏‡§ï‡§æ ‡§π‡•à!\"\n\n‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§ó‡§¨‡§¨‡•Ç‡§≤‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ, \"‡§ï‡•å‡§® ‡§π‡•à ‡§µ‡•ã? ‡§Æ‡•Å‡§ù‡•á ‡§¶‡§ø‡§ñ‡§æ‡§ì!\"\n\n‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§∂‡•á‡§∞ ‡§ï‡•ã ‡§ú‡§Ç‡§ó‡§≤ ‡§ï‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§ï‡•Å‡§è‡§Å ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§≤‡•á ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§ï‡§π‡§æ, \"‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú, ‡§µ‡•ã ‡§á‡§∏‡•Ä ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡§æ ‡§π‡•à!\"\n\n‡§∂‡•á‡§∞ ‡§®‡•á ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ù‡§æ‡§Å‡§ï‡§æ, ‡§§‡•ã ‡§â‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§π‡•Ä ‡§™‡§∞‡§õ‡§æ‡§à ‡§¶‡§ø‡§ñ‡•Ä‡•§ ‡§â‡§∏‡§®‡•á ‡§∏‡•ã‡§ö‡§æ ‡§ï‡§ø ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§∂‡•á‡§∞ ‡§â‡§∏‡•á ‡§ò‡•Ç‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à! ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§®‡•á ‡§ú‡•ã‡§∞ ‡§∏‡•á ‡§¶‡§π‡§æ‡§°‡§º‡§æ ‡§î‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§õ‡§≤‡§æ‡§Ç‡§ó ‡§≤‡§ó‡§æ ‡§¶‡•Ä‡•§ üåÄüí¶\n\n‡§¨‡§∏! ‡§∂‡•á‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§ï‡§∞ ‡§°‡•Ç‡§¨ ‡§ó‡§Ø‡§æ‡•§ ‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ñ‡•Å‡§∂‡•Ä ‡§∏‡•á ‡§®‡§æ‡§ö‡§®‡•á ‡§≤‡§ó‡•á, ‡§î‡§∞ ‡§ö‡§§‡•Å‡§∞ ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§π‡•Ä‡§∞‡•ã ‡§¨‡§® ‡§ó‡§Ø‡§æ! üéâüê∞\n\n**Schema:**\n\n**Scene 1:**\n\n{\ntext: \"‡§è‡§ï ‡§ò‡§®‡§æ ‡§ú‡§Ç‡§ó‡§≤ ‡§•‡§æ, ‡§ú‡§π‡§æ‡§Å ‡§è‡§ï ‡§≤‡§æ‡§≤‡§ö‡•Ä ‡§∂‡•á‡§∞ ‡§∞‡§π‡§§‡§æ ‡§•‡§æ‡•§\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20dense%20forest,%20a%20cunning%20lion%20sitting\"\n}\n\n**Scene 2:**\n\n{\ntext: \"‡§µ‡§π ‡§∞‡•ã‡§ú‡§º ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ï‡•ã ‡§™‡§ï‡§°‡§º‡§ï‡§∞ ‡§ñ‡§æ ‡§ú‡§æ‡§§‡§æ‡•§\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20lion%20catching%20a%20scared%20deer\"\n}\n\n**Scene 3:**\n\n{\ntext: \"‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§°‡§∞ ‡§ó‡§è ‡§î‡§∞ ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§è‡§ï ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§à‡•§\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20group%20of%20scared%20animals%20(rabbit,fox,elephant)%20whispering%20a%20plan\"\n}\n\n**Scene 4:**\n\n{\ntext: \"‡§è‡§ï ‡§¶‡§ø‡§®, ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§ï‡•Ä ‡§¨‡§æ‡§∞‡•Ä ‡§Ü‡§à‡•§ ‡§µ‡§π ‡§ö‡§§‡•Å‡§∞ ‡§•‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§ö‡§≤‡§§‡•á ‡§π‡•Å‡§è ‡§∂‡•á‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§™‡§π‡•Å‡§Å‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∞ ‡§ï‡§∞ ‡§¶‡•Ä‡•§\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20clever%20rabbit%20walking%20slowly%20towards%20an%20impatient%20lion\"\n}\n\n**Scene 5:**\n\n{\ntext: \"‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§π‡§æ‡§°‡§º‡§æ, '‡§§‡•Ç ‡§¶‡•á‡§∞ ‡§∏‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Ü‡§Ø‡§æ?'\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20an%20angry%20lion%20roaring%20at%20a%20nervous%20rabbit,%20text%20bubble%20with%20'‡§§‡•Ç%20‡§¶‡•á‡§∞%20‡§∏‡•á%20‡§ï‡•ç‡§Ø‡•ã‡§Ç%20‡§Ü‡§Ø‡§æ?'\"\n}\n\n**Scene 6:**\n\n{\ntext: \"‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§®‡•á ‡§°‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡§π‡§æ, '‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú! ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§Ü ‡§∞‡§π‡§æ ‡§•‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§î‡§∞ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§Æ‡•Å‡§ù‡•á ‡§∞‡•ã‡§ï ‡§≤‡§ø‡§Ø‡§æ‡•§ ‡§µ‡§π ‡§ï‡§π ‡§∞‡§π‡§æ ‡§•‡§æ ‡§ï‡§ø ‡§Ø‡§π ‡§ú‡§Ç‡§ó‡§≤ ‡§Ö‡§¨ ‡§â‡§∏‡§ï‡§æ ‡§π‡•à!'\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20frightened%20rabbit%20explaining%20to%20the%20lion,%20text%20bubble%20with%20'‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú!%20‡§Æ‡•à‡§Ç%20‡§∏‡§Æ‡§Ø%20‡§™‡§∞%20‡§Ü%20‡§∞‡§π‡§æ%20‡§•‡§æ,%20‡§≤‡•á‡§ï‡§ø‡§®%20‡§∞‡§æ‡§∏‡•ç‡§§‡•á%20‡§Æ‡•á‡§Ç%20‡§è‡§ï%20‡§î‡§∞%20‡§∂‡•á‡§∞%20‡§®‡•á%20‡§Æ‡•Å‡§ù‡•á%20‡§∞‡•ã‡§ï%20‡§≤‡§ø‡§Ø‡§æ‡•§%20‡§µ‡§π%20‡§ï‡§π%20‡§∞‡§π‡§æ%20‡§•‡§æ%20‡§ï‡§ø%20‡§Ø‡§π%20‡§ú‡§Ç‡§ó‡§≤%20‡§Ö‡§¨%20‡§â‡§∏‡§ï‡§æ%20‡§π‡•à!'\"\n}\n\n**Scene 7:**\n\n{\ntext: \"‡§∂‡•á‡§∞ ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§ó‡§¨‡§¨‡•Ç‡§≤‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ, '‡§ï‡•å‡§® ‡§π‡•à ‡§µ‡•ã? ‡§Æ‡•Å‡§ù‡•á ‡§¶‡§ø‡§ñ‡§æ‡§ì!'\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20very%20angry%20lion%20with%20fiery%20eyes,%20text%20bubble%20with%20'‡§ï‡•å‡§®%20‡§π‡•à%20‡§µ‡•ã?%20‡§Æ‡•Å‡§ù‡•á%20‡§¶‡§ø‡§ñ‡§æ‡§ì!'\"\n}\n\n**Scene 8:**\n\n{\ntext: \"‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§∂‡•á‡§∞ ‡§ï‡•ã ‡§ú‡§Ç‡§ó‡§≤ ‡§ï‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§ï‡•Å‡§è‡§Å ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§≤‡•á ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§ï‡§π‡§æ, '‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú, ‡§µ‡•ã ‡§á‡§∏‡•Ä ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡§æ ‡§π‡•à!'\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20rabbit%20leading%20a%20lion%20to%20an%20old%20well,%20text%20bubble%20with%20'‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú,%20‡§µ‡•ã%20‡§á‡§∏‡•Ä%20‡§ï‡•Å‡§è‡§Å%20‡§Æ‡•á‡§Ç%20‡§∞‡§π‡§§‡§æ%20‡§π‡•à!'\"\n}\n\n**Scene 9:**\n\n{\ntext: \"‡§∂‡•á‡§∞ ‡§®‡•á ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ù‡§æ‡§Å‡§ï‡§æ, ‡§§‡•ã ‡§â‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§π‡•Ä ‡§™‡§∞‡§õ‡§æ‡§à ‡§¶‡§ø‡§ñ‡•Ä‡•§ ‡§â‡§∏‡§®‡•á ‡§∏‡•ã‡§ö‡§æ ‡§ï‡§ø ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§∂‡•á‡§∞ ‡§â‡§∏‡•á ‡§ò‡•Ç‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à! ‡§ó‡•Å‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§®‡•á ‡§ú‡•ã‡§∞ ‡§∏‡•á ‡§¶‡§π‡§æ‡§°‡§º‡§æ ‡§î‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§õ‡§≤‡§æ‡§Ç‡§ó ‡§≤‡§ó‡§æ ‡§¶‡•Ä‡•§ üåÄüí¶\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20a%20lion%20peering%20into%20a%20well%20seeing%20his%20reflection,%20then%20jumping%20in%20with%20water%20splash%20and%20a%20swirl%20emoji\"\n}\n\n**Scene 10:**\n\n{\ntext: \"‡§¨‡§∏! ‡§∂‡•á‡§∞ ‡§ï‡•Å‡§è‡§Å ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§ï‡§∞ ‡§°‡•Ç‡§¨ ‡§ó‡§Ø‡§æ‡•§ ‡§∏‡§æ‡§∞‡•á ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ñ‡•Å‡§∂‡•Ä ‡§∏‡•á ‡§®‡§æ‡§ö‡§®‡•á ‡§≤‡§ó‡•á, ‡§î‡§∞ ‡§ö‡§§‡•Å‡§∞ ‡§ñ‡§∞‡§ó‡•ã‡§∂ ‡§π‡•Ä‡§∞‡•ã ‡§¨‡§® ‡§ó‡§Ø‡§æ! üéâüê∞\",\nimage: \"https://image.pollinations.ai/prompt/3d%20cartoon%20style,%20animals%20(rabbit,fox,elephant,deer)%20happily%20dancing%20around%20a%20well,%20a%20rabbit%20with%20a%20hero%20cape%20and%20confetti,%20party%20popper%20and%20rabbit%20emojis\"\n}\n\nRemember to replace the placeholder URLs with the actual images you generate. Good luck with your animation!"},
        ],
      },
    ],
  });

  // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
  // // TODO: Following code needs to be updated for client-side apps.
  // const candidates = result.response.candidates;
  // for(let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
  //   for(let part_index = 0; part_index < candidates[candidate_index].content.parts.length; part_index++) {
  //     const part = candidates[candidate_index].content.parts[part_index];
  //     if(part.inlineData) {
  //       try {
  //         const filename = `output_${candidate_index}_${part_index}.${mime.extension(part.inlineData.mimeType)}`;
  //         fs.writeFileSync(filename, Buffer.from(part.inlineData.data, 'base64'));
  //         console.log(`Output written to: ${filename}`);
  //       } catch (err) {
  //         console.error(err);
  //       }
  //     }
  //   }
  // }
  // console.log(result.response.text());
